{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import*as discountService from'../../services/discounts';const initialState={items:[],selectedDiscount:null,totalCount:0,pageNumber:1,pageSize:10,loading:false,error:null,filters:{}};export const fetchDiscounts=createAsyncThunk('discounts/fetchDiscounts',async _ref=>{let{pageNumber,pageSize,searchTerm,isActive}=_ref;return await discountService.getDiscounts(pageNumber,pageSize,searchTerm,isActive);});export const fetchDiscount=createAsyncThunk('discounts/fetchDiscount',async id=>{return await discountService.getDiscount(id);});export const createDiscount=createAsyncThunk('discounts/createDiscount',async discount=>{return await discountService.createDiscount(discount);});export const updateDiscount=createAsyncThunk('discounts/updateDiscount',async _ref2=>{let{id,discount}=_ref2;return await discountService.updateDiscount(id,discount);});export const deleteDiscount=createAsyncThunk('discounts/deleteDiscount',async id=>{await discountService.deleteDiscount(id);return id;});const discountSlice=createSlice({name:'discounts',initialState,reducers:{setSelectedDiscount:(state,action)=>{state.selectedDiscount=action.payload;},clearSelectedDiscount:state=>{state.selectedDiscount=null;},setFilters:(state,action)=>{state.filters={...state.filters,...action.payload};},clearFilters:state=>{state.filters=initialState.filters;}},extraReducers:builder=>{// Fetch Discounts\nbuilder.addCase(fetchDiscounts.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchDiscounts.fulfilled,(state,action)=>{state.loading=false;state.items=action.payload.data||[];state.totalCount=action.payload.totalCount;state.pageNumber=action.payload.pageNumber;state.pageSize=action.payload.pageSize;}).addCase(fetchDiscounts.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'İndirimler yüklenemedi';});// Fetch Discount\nbuilder.addCase(fetchDiscount.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchDiscount.fulfilled,(state,action)=>{state.loading=false;state.selectedDiscount=action.payload;}).addCase(fetchDiscount.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'İndirim yüklenemedi';});// Create Discount\nbuilder.addCase(createDiscount.pending,state=>{state.loading=true;state.error=null;}).addCase(createDiscount.fulfilled,(state,action)=>{state.loading=false;state.items.push(action.payload);state.totalCount+=1;}).addCase(createDiscount.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'İndirim oluşturulamadı';});// Update Discount\nbuilder.addCase(updateDiscount.pending,state=>{state.loading=true;state.error=null;}).addCase(updateDiscount.fulfilled,(state,action)=>{var _state$selectedDiscou;state.loading=false;const index=state.items.findIndex(item=>item.id===action.payload.id);if(index!==-1){state.items[index]=action.payload;}if(((_state$selectedDiscou=state.selectedDiscount)===null||_state$selectedDiscou===void 0?void 0:_state$selectedDiscou.id)===action.payload.id){state.selectedDiscount=action.payload;}}).addCase(updateDiscount.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'İndirim güncellenemedi';});// Delete Discount\nbuilder.addCase(deleteDiscount.pending,state=>{state.loading=true;state.error=null;}).addCase(deleteDiscount.fulfilled,(state,action)=>{var _state$selectedDiscou2;state.loading=false;state.items=state.items.filter(item=>item.id!==action.payload);state.totalCount-=1;if(((_state$selectedDiscou2=state.selectedDiscount)===null||_state$selectedDiscou2===void 0?void 0:_state$selectedDiscou2.id)===action.payload){state.selectedDiscount=null;}}).addCase(deleteDiscount.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'İndirim silinemedi';});}});export const{setSelectedDiscount,clearSelectedDiscount,setFilters,clearFilters}=discountSlice.actions;export default discountSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","discountService","initialState","items","selectedDiscount","totalCount","pageNumber","pageSize","loading","error","filters","fetchDiscounts","_ref","searchTerm","isActive","getDiscounts","fetchDiscount","id","getDiscount","createDiscount","discount","updateDiscount","_ref2","deleteDiscount","discountSlice","name","reducers","setSelectedDiscount","state","action","payload","clearSelectedDiscount","setFilters","clearFilters","extraReducers","builder","addCase","pending","fulfilled","data","rejected","message","push","_state$selectedDiscou","index","findIndex","item","_state$selectedDiscou2","filter","actions","reducer"],"sources":["/home/mertmnv/Masaüstü/Projeler/api/client/src/store/slices/discountSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { Discount } from '../../types';\nimport * as discountService from '../../services/discounts';\nimport { CreateDiscountRequest, UpdateDiscountRequest } from '../../services/discounts';\n\ninterface DiscountState {\n  items: Discount[];\n  selectedDiscount: Discount | null;\n  totalCount: number;\n  pageNumber: number;\n  pageSize: number;\n  loading: boolean;\n  error: string | null;\n  filters: {\n    searchTerm?: string;\n    isActive?: boolean;\n  };\n}\n\nconst initialState: DiscountState = {\n  items: [],\n  selectedDiscount: null,\n  totalCount: 0,\n  pageNumber: 1,\n  pageSize: 10,\n  loading: false,\n  error: null,\n  filters: {},\n};\n\nexport const fetchDiscounts = createAsyncThunk(\n  'discounts/fetchDiscounts',\n  async ({\n    pageNumber,\n    pageSize,\n    searchTerm,\n    isActive,\n  }: {\n    pageNumber?: number;\n    pageSize?: number;\n    searchTerm?: string;\n    isActive?: boolean;\n  }) => {\n    return await discountService.getDiscounts(pageNumber, pageSize, searchTerm, isActive);\n  }\n);\n\nexport const fetchDiscount = createAsyncThunk(\n  'discounts/fetchDiscount',\n  async (id: number) => {\n    return await discountService.getDiscount(id);\n  }\n);\n\nexport const createDiscount = createAsyncThunk(\n  'discounts/createDiscount',\n  async (discount: CreateDiscountRequest) => {\n    return await discountService.createDiscount(discount);\n  }\n);\n\nexport const updateDiscount = createAsyncThunk(\n  'discounts/updateDiscount',\n  async ({ id, discount }: { id: number; discount: UpdateDiscountRequest }) => {\n    return await discountService.updateDiscount(id, discount);\n  }\n);\n\nexport const deleteDiscount = createAsyncThunk(\n  'discounts/deleteDiscount',\n  async (id: number) => {\n    await discountService.deleteDiscount(id);\n    return id;\n  }\n);\n\nconst discountSlice = createSlice({\n  name: 'discounts',\n  initialState,\n  reducers: {\n    setSelectedDiscount: (state, action: PayloadAction<Discount | null>) => {\n      state.selectedDiscount = action.payload;\n    },\n    clearSelectedDiscount: (state) => {\n      state.selectedDiscount = null;\n    },\n    setFilters: (state, action: PayloadAction<Partial<DiscountState['filters']>>) => {\n      state.filters = { ...state.filters, ...action.payload };\n    },\n    clearFilters: (state) => {\n      state.filters = initialState.filters;\n    },\n  },\n  extraReducers: (builder) => {\n    // Fetch Discounts\n    builder\n      .addCase(fetchDiscounts.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchDiscounts.fulfilled, (state, action) => {\n        state.loading = false;\n        state.items = action.payload.data || [];\n        state.totalCount = action.payload.totalCount;\n        state.pageNumber = action.payload.pageNumber;\n        state.pageSize = action.payload.pageSize;\n      })\n      .addCase(fetchDiscounts.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'İndirimler yüklenemedi';\n      });\n\n    // Fetch Discount\n    builder\n      .addCase(fetchDiscount.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchDiscount.fulfilled, (state, action) => {\n        state.loading = false;\n        state.selectedDiscount = action.payload;\n      })\n      .addCase(fetchDiscount.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'İndirim yüklenemedi';\n      });\n\n    // Create Discount\n    builder\n      .addCase(createDiscount.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(createDiscount.fulfilled, (state, action) => {\n        state.loading = false;\n        state.items.push(action.payload);\n        state.totalCount += 1;\n      })\n      .addCase(createDiscount.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'İndirim oluşturulamadı';\n      });\n\n    // Update Discount\n    builder\n      .addCase(updateDiscount.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(updateDiscount.fulfilled, (state, action) => {\n        state.loading = false;\n        const index = state.items.findIndex((item) => item.id === action.payload.id);\n        if (index !== -1) {\n          state.items[index] = action.payload;\n        }\n        if (state.selectedDiscount?.id === action.payload.id) {\n          state.selectedDiscount = action.payload;\n        }\n      })\n      .addCase(updateDiscount.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'İndirim güncellenemedi';\n      });\n\n    // Delete Discount\n    builder\n      .addCase(deleteDiscount.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(deleteDiscount.fulfilled, (state, action) => {\n        state.loading = false;\n        state.items = state.items.filter((item) => item.id !== action.payload);\n        state.totalCount -= 1;\n        if (state.selectedDiscount?.id === action.payload) {\n          state.selectedDiscount = null;\n        }\n      })\n      .addCase(deleteDiscount.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'İndirim silinemedi';\n      });\n  },\n});\n\nexport const { setSelectedDiscount, clearSelectedDiscount, setFilters, clearFilters } =\n  discountSlice.actions;\n\nexport default discountSlice.reducer; "],"mappings":"AAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAuB,kBAAkB,CAE/E,MAAO,GAAK,CAAAC,eAAe,KAAM,0BAA0B,CAiB3D,KAAM,CAAAC,YAA2B,CAAG,CAClCC,KAAK,CAAE,EAAE,CACTC,gBAAgB,CAAE,IAAI,CACtBC,UAAU,CAAE,CAAC,CACbC,UAAU,CAAE,CAAC,CACbC,QAAQ,CAAE,EAAE,CACZC,OAAO,CAAE,KAAK,CACdC,KAAK,CAAE,IAAI,CACXC,OAAO,CAAE,CAAC,CACZ,CAAC,CAED,MAAO,MAAM,CAAAC,cAAc,CAAGX,gBAAgB,CAC5C,0BAA0B,CAC1B,MAAAY,IAAA,EAUM,IAVC,CACLN,UAAU,CACVC,QAAQ,CACRM,UAAU,CACVC,QAMF,CAAC,CAAAF,IAAA,CACC,MAAO,MAAM,CAAAX,eAAe,CAACc,YAAY,CAACT,UAAU,CAAEC,QAAQ,CAAEM,UAAU,CAAEC,QAAQ,CAAC,CACvF,CACF,CAAC,CAED,MAAO,MAAM,CAAAE,aAAa,CAAGhB,gBAAgB,CAC3C,yBAAyB,CACzB,KAAO,CAAAiB,EAAU,EAAK,CACpB,MAAO,MAAM,CAAAhB,eAAe,CAACiB,WAAW,CAACD,EAAE,CAAC,CAC9C,CACF,CAAC,CAED,MAAO,MAAM,CAAAE,cAAc,CAAGnB,gBAAgB,CAC5C,0BAA0B,CAC1B,KAAO,CAAAoB,QAA+B,EAAK,CACzC,MAAO,MAAM,CAAAnB,eAAe,CAACkB,cAAc,CAACC,QAAQ,CAAC,CACvD,CACF,CAAC,CAED,MAAO,MAAM,CAAAC,cAAc,CAAGrB,gBAAgB,CAC5C,0BAA0B,CAC1B,MAAAsB,KAAA,EAA6E,IAAtE,CAAEL,EAAE,CAAEG,QAA0D,CAAC,CAAAE,KAAA,CACtE,MAAO,MAAM,CAAArB,eAAe,CAACoB,cAAc,CAACJ,EAAE,CAAEG,QAAQ,CAAC,CAC3D,CACF,CAAC,CAED,MAAO,MAAM,CAAAG,cAAc,CAAGvB,gBAAgB,CAC5C,0BAA0B,CAC1B,KAAO,CAAAiB,EAAU,EAAK,CACpB,KAAM,CAAAhB,eAAe,CAACsB,cAAc,CAACN,EAAE,CAAC,CACxC,MAAO,CAAAA,EAAE,CACX,CACF,CAAC,CAED,KAAM,CAAAO,aAAa,CAAGzB,WAAW,CAAC,CAChC0B,IAAI,CAAE,WAAW,CACjBvB,YAAY,CACZwB,QAAQ,CAAE,CACRC,mBAAmB,CAAEA,CAACC,KAAK,CAAEC,MAAsC,GAAK,CACtED,KAAK,CAACxB,gBAAgB,CAAGyB,MAAM,CAACC,OAAO,CACzC,CAAC,CACDC,qBAAqB,CAAGH,KAAK,EAAK,CAChCA,KAAK,CAACxB,gBAAgB,CAAG,IAAI,CAC/B,CAAC,CACD4B,UAAU,CAAEA,CAACJ,KAAK,CAAEC,MAAwD,GAAK,CAC/ED,KAAK,CAAClB,OAAO,CAAG,CAAE,GAAGkB,KAAK,CAAClB,OAAO,CAAE,GAAGmB,MAAM,CAACC,OAAQ,CAAC,CACzD,CAAC,CACDG,YAAY,CAAGL,KAAK,EAAK,CACvBA,KAAK,CAAClB,OAAO,CAAGR,YAAY,CAACQ,OAAO,CACtC,CACF,CAAC,CACDwB,aAAa,CAAGC,OAAO,EAAK,CAC1B;AACAA,OAAO,CACJC,OAAO,CAACzB,cAAc,CAAC0B,OAAO,CAAGT,KAAK,EAAK,CAC1CA,KAAK,CAACpB,OAAO,CAAG,IAAI,CACpBoB,KAAK,CAACnB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACD2B,OAAO,CAACzB,cAAc,CAAC2B,SAAS,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,CACpDD,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACzB,KAAK,CAAG0B,MAAM,CAACC,OAAO,CAACS,IAAI,EAAI,EAAE,CACvCX,KAAK,CAACvB,UAAU,CAAGwB,MAAM,CAACC,OAAO,CAACzB,UAAU,CAC5CuB,KAAK,CAACtB,UAAU,CAAGuB,MAAM,CAACC,OAAO,CAACxB,UAAU,CAC5CsB,KAAK,CAACrB,QAAQ,CAAGsB,MAAM,CAACC,OAAO,CAACvB,QAAQ,CAC1C,CAAC,CAAC,CACD6B,OAAO,CAACzB,cAAc,CAAC6B,QAAQ,CAAE,CAACZ,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACnB,KAAK,CAAGoB,MAAM,CAACpB,KAAK,CAACgC,OAAO,EAAI,wBAAwB,CAChE,CAAC,CAAC,CAEJ;AACAN,OAAO,CACJC,OAAO,CAACpB,aAAa,CAACqB,OAAO,CAAGT,KAAK,EAAK,CACzCA,KAAK,CAACpB,OAAO,CAAG,IAAI,CACpBoB,KAAK,CAACnB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACD2B,OAAO,CAACpB,aAAa,CAACsB,SAAS,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACxB,gBAAgB,CAAGyB,MAAM,CAACC,OAAO,CACzC,CAAC,CAAC,CACDM,OAAO,CAACpB,aAAa,CAACwB,QAAQ,CAAE,CAACZ,KAAK,CAAEC,MAAM,GAAK,CAClDD,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACnB,KAAK,CAAGoB,MAAM,CAACpB,KAAK,CAACgC,OAAO,EAAI,qBAAqB,CAC7D,CAAC,CAAC,CAEJ;AACAN,OAAO,CACJC,OAAO,CAACjB,cAAc,CAACkB,OAAO,CAAGT,KAAK,EAAK,CAC1CA,KAAK,CAACpB,OAAO,CAAG,IAAI,CACpBoB,KAAK,CAACnB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACD2B,OAAO,CAACjB,cAAc,CAACmB,SAAS,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,CACpDD,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACzB,KAAK,CAACuC,IAAI,CAACb,MAAM,CAACC,OAAO,CAAC,CAChCF,KAAK,CAACvB,UAAU,EAAI,CAAC,CACvB,CAAC,CAAC,CACD+B,OAAO,CAACjB,cAAc,CAACqB,QAAQ,CAAE,CAACZ,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACnB,KAAK,CAAGoB,MAAM,CAACpB,KAAK,CAACgC,OAAO,EAAI,wBAAwB,CAChE,CAAC,CAAC,CAEJ;AACAN,OAAO,CACJC,OAAO,CAACf,cAAc,CAACgB,OAAO,CAAGT,KAAK,EAAK,CAC1CA,KAAK,CAACpB,OAAO,CAAG,IAAI,CACpBoB,KAAK,CAACnB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACD2B,OAAO,CAACf,cAAc,CAACiB,SAAS,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,KAAAc,qBAAA,CACpDf,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrB,KAAM,CAAAoC,KAAK,CAAGhB,KAAK,CAACzB,KAAK,CAAC0C,SAAS,CAAEC,IAAI,EAAKA,IAAI,CAAC7B,EAAE,GAAKY,MAAM,CAACC,OAAO,CAACb,EAAE,CAAC,CAC5E,GAAI2B,KAAK,GAAK,CAAC,CAAC,CAAE,CAChBhB,KAAK,CAACzB,KAAK,CAACyC,KAAK,CAAC,CAAGf,MAAM,CAACC,OAAO,CACrC,CACA,GAAI,EAAAa,qBAAA,CAAAf,KAAK,CAACxB,gBAAgB,UAAAuC,qBAAA,iBAAtBA,qBAAA,CAAwB1B,EAAE,IAAKY,MAAM,CAACC,OAAO,CAACb,EAAE,CAAE,CACpDW,KAAK,CAACxB,gBAAgB,CAAGyB,MAAM,CAACC,OAAO,CACzC,CACF,CAAC,CAAC,CACDM,OAAO,CAACf,cAAc,CAACmB,QAAQ,CAAE,CAACZ,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACnB,KAAK,CAAGoB,MAAM,CAACpB,KAAK,CAACgC,OAAO,EAAI,wBAAwB,CAChE,CAAC,CAAC,CAEJ;AACAN,OAAO,CACJC,OAAO,CAACb,cAAc,CAACc,OAAO,CAAGT,KAAK,EAAK,CAC1CA,KAAK,CAACpB,OAAO,CAAG,IAAI,CACpBoB,KAAK,CAACnB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACD2B,OAAO,CAACb,cAAc,CAACe,SAAS,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,KAAAkB,sBAAA,CACpDnB,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACzB,KAAK,CAAGyB,KAAK,CAACzB,KAAK,CAAC6C,MAAM,CAAEF,IAAI,EAAKA,IAAI,CAAC7B,EAAE,GAAKY,MAAM,CAACC,OAAO,CAAC,CACtEF,KAAK,CAACvB,UAAU,EAAI,CAAC,CACrB,GAAI,EAAA0C,sBAAA,CAAAnB,KAAK,CAACxB,gBAAgB,UAAA2C,sBAAA,iBAAtBA,sBAAA,CAAwB9B,EAAE,IAAKY,MAAM,CAACC,OAAO,CAAE,CACjDF,KAAK,CAACxB,gBAAgB,CAAG,IAAI,CAC/B,CACF,CAAC,CAAC,CACDgC,OAAO,CAACb,cAAc,CAACiB,QAAQ,CAAE,CAACZ,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAACpB,OAAO,CAAG,KAAK,CACrBoB,KAAK,CAACnB,KAAK,CAAGoB,MAAM,CAACpB,KAAK,CAACgC,OAAO,EAAI,oBAAoB,CAC5D,CAAC,CAAC,CACN,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CAAEd,mBAAmB,CAAEI,qBAAqB,CAAEC,UAAU,CAAEC,YAAa,CAAC,CACnFT,aAAa,CAACyB,OAAO,CAEvB,cAAe,CAAAzB,aAAa,CAAC0B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}