{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import*as categoryService from'../../services/categories';const initialState={items:[],selectedCategory:null,totalCount:0,pageNumber:1,pageSize:10,loading:false,error:null};export const fetchCategories=createAsyncThunk('categories/fetchCategories',async _ref=>{let{pageNumber,pageSize,searchTerm}=_ref;return await categoryService.getCategories(pageNumber,pageSize,searchTerm);});export const fetchCategory=createAsyncThunk('categories/fetchCategory',async id=>{return await categoryService.getCategory(id);});export const createCategory=createAsyncThunk('categories/createCategory',async category=>{return await categoryService.createCategory(category);});export const updateCategory=createAsyncThunk('categories/updateCategory',async _ref2=>{let{id,category}=_ref2;return await categoryService.updateCategory(id,category);});export const deleteCategory=createAsyncThunk('categories/deleteCategory',async id=>{await categoryService.deleteCategory(id);return id;});const categorySlice=createSlice({name:'categories',initialState,reducers:{setSelectedCategory:(state,action)=>{state.selectedCategory=action.payload;},clearSelectedCategory:state=>{state.selectedCategory=null;}},extraReducers:builder=>{// Fetch Categories\nbuilder.addCase(fetchCategories.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchCategories.fulfilled,(state,action)=>{state.loading=false;state.items=action.payload.data||[];state.totalCount=action.payload.totalCount;state.pageNumber=action.payload.pageNumber;state.pageSize=action.payload.pageSize;}).addCase(fetchCategories.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'Kategoriler yüklenemedi';});// Fetch Category\nbuilder.addCase(fetchCategory.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchCategory.fulfilled,(state,action)=>{state.loading=false;state.selectedCategory=action.payload;}).addCase(fetchCategory.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'Kategori yüklenemedi';});// Create Category\nbuilder.addCase(createCategory.pending,state=>{state.loading=true;state.error=null;}).addCase(createCategory.fulfilled,(state,action)=>{state.loading=false;state.items.push(action.payload);state.totalCount+=1;}).addCase(createCategory.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'Kategori oluşturulamadı';});// Update Category\nbuilder.addCase(updateCategory.pending,state=>{state.loading=true;state.error=null;}).addCase(updateCategory.fulfilled,(state,action)=>{var _state$selectedCatego;state.loading=false;const index=state.items.findIndex(item=>item.id===action.payload.id);if(index!==-1){state.items[index]=action.payload;}if(((_state$selectedCatego=state.selectedCategory)===null||_state$selectedCatego===void 0?void 0:_state$selectedCatego.id)===action.payload.id){state.selectedCategory=action.payload;}}).addCase(updateCategory.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'Kategori güncellenemedi';});// Delete Category\nbuilder.addCase(deleteCategory.pending,state=>{state.loading=true;state.error=null;}).addCase(deleteCategory.fulfilled,(state,action)=>{var _state$selectedCatego2;state.loading=false;state.items=state.items.filter(item=>item.id!==action.payload);state.totalCount-=1;if(((_state$selectedCatego2=state.selectedCategory)===null||_state$selectedCatego2===void 0?void 0:_state$selectedCatego2.id)===action.payload){state.selectedCategory=null;}}).addCase(deleteCategory.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'Kategori silinemedi';});}});export const{setSelectedCategory,clearSelectedCategory}=categorySlice.actions;export default categorySlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","categoryService","initialState","items","selectedCategory","totalCount","pageNumber","pageSize","loading","error","fetchCategories","_ref","searchTerm","getCategories","fetchCategory","id","getCategory","createCategory","category","updateCategory","_ref2","deleteCategory","categorySlice","name","reducers","setSelectedCategory","state","action","payload","clearSelectedCategory","extraReducers","builder","addCase","pending","fulfilled","data","rejected","message","push","_state$selectedCatego","index","findIndex","item","_state$selectedCatego2","filter","actions","reducer"],"sources":["/home/mertmnv/Masaüstü/Projeler/api/client/src/store/slices/categorySlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { Category } from '../../types';\nimport * as categoryService from '../../services/categories';\nimport { CreateCategoryRequest, UpdateCategoryRequest } from '../../services/categories';\n\ninterface CategoryState {\n  items: Category[];\n  selectedCategory: Category | null;\n  totalCount: number;\n  pageNumber: number;\n  pageSize: number;\n  loading: boolean;\n  error: string | null;\n}\n\nconst initialState: CategoryState = {\n  items: [],\n  selectedCategory: null,\n  totalCount: 0,\n  pageNumber: 1,\n  pageSize: 10,\n  loading: false,\n  error: null,\n};\n\nexport const fetchCategories = createAsyncThunk(\n  'categories/fetchCategories',\n  async ({ pageNumber, pageSize, searchTerm }: { pageNumber?: number; pageSize?: number; searchTerm?: string }) => {\n    return await categoryService.getCategories(pageNumber, pageSize, searchTerm);\n  }\n);\n\nexport const fetchCategory = createAsyncThunk(\n  'categories/fetchCategory',\n  async (id: number) => {\n    return await categoryService.getCategory(id);\n  }\n);\n\nexport const createCategory = createAsyncThunk(\n  'categories/createCategory',\n  async (category: CreateCategoryRequest) => {\n    return await categoryService.createCategory(category);\n  }\n);\n\nexport const updateCategory = createAsyncThunk(\n  'categories/updateCategory',\n  async ({ id, category }: { id: number; category: UpdateCategoryRequest }) => {\n    return await categoryService.updateCategory(id, category);\n  }\n);\n\nexport const deleteCategory = createAsyncThunk(\n  'categories/deleteCategory',\n  async (id: number) => {\n    await categoryService.deleteCategory(id);\n    return id;\n  }\n);\n\nconst categorySlice = createSlice({\n  name: 'categories',\n  initialState,\n  reducers: {\n    setSelectedCategory: (state, action: PayloadAction<Category | null>) => {\n      state.selectedCategory = action.payload;\n    },\n    clearSelectedCategory: (state) => {\n      state.selectedCategory = null;\n    },\n  },\n  extraReducers: (builder) => {\n    // Fetch Categories\n    builder\n      .addCase(fetchCategories.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchCategories.fulfilled, (state, action) => {\n        state.loading = false;\n        state.items = action.payload.data || [];\n        state.totalCount = action.payload.totalCount;\n        state.pageNumber = action.payload.pageNumber;\n        state.pageSize = action.payload.pageSize;\n      })\n      .addCase(fetchCategories.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'Kategoriler yüklenemedi';\n      });\n\n    // Fetch Category\n    builder\n      .addCase(fetchCategory.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchCategory.fulfilled, (state, action) => {\n        state.loading = false;\n        state.selectedCategory = action.payload;\n      })\n      .addCase(fetchCategory.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'Kategori yüklenemedi';\n      });\n\n    // Create Category\n    builder\n      .addCase(createCategory.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(createCategory.fulfilled, (state, action) => {\n        state.loading = false;\n        state.items.push(action.payload);\n        state.totalCount += 1;\n      })\n      .addCase(createCategory.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'Kategori oluşturulamadı';\n      });\n\n    // Update Category\n    builder\n      .addCase(updateCategory.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(updateCategory.fulfilled, (state, action) => {\n        state.loading = false;\n        const index = state.items.findIndex((item) => item.id === action.payload.id);\n        if (index !== -1) {\n          state.items[index] = action.payload;\n        }\n        if (state.selectedCategory?.id === action.payload.id) {\n          state.selectedCategory = action.payload;\n        }\n      })\n      .addCase(updateCategory.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'Kategori güncellenemedi';\n      });\n\n    // Delete Category\n    builder\n      .addCase(deleteCategory.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(deleteCategory.fulfilled, (state, action) => {\n        state.loading = false;\n        state.items = state.items.filter((item) => item.id !== action.payload);\n        state.totalCount -= 1;\n        if (state.selectedCategory?.id === action.payload) {\n          state.selectedCategory = null;\n        }\n      })\n      .addCase(deleteCategory.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message || 'Kategori silinemedi';\n      });\n  },\n});\n\nexport const { setSelectedCategory, clearSelectedCategory } = categorySlice.actions;\n\nexport default categorySlice.reducer; "],"mappings":"AAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAuB,kBAAkB,CAE/E,MAAO,GAAK,CAAAC,eAAe,KAAM,2BAA2B,CAa5D,KAAM,CAAAC,YAA2B,CAAG,CAClCC,KAAK,CAAE,EAAE,CACTC,gBAAgB,CAAE,IAAI,CACtBC,UAAU,CAAE,CAAC,CACbC,UAAU,CAAE,CAAC,CACbC,QAAQ,CAAE,EAAE,CACZC,OAAO,CAAE,KAAK,CACdC,KAAK,CAAE,IACT,CAAC,CAED,MAAO,MAAM,CAAAC,eAAe,CAAGV,gBAAgB,CAC7C,4BAA4B,CAC5B,MAAAW,IAAA,EAAiH,IAA1G,CAAEL,UAAU,CAAEC,QAAQ,CAAEK,UAA4E,CAAC,CAAAD,IAAA,CAC1G,MAAO,MAAM,CAAAV,eAAe,CAACY,aAAa,CAACP,UAAU,CAAEC,QAAQ,CAAEK,UAAU,CAAC,CAC9E,CACF,CAAC,CAED,MAAO,MAAM,CAAAE,aAAa,CAAGd,gBAAgB,CAC3C,0BAA0B,CAC1B,KAAO,CAAAe,EAAU,EAAK,CACpB,MAAO,MAAM,CAAAd,eAAe,CAACe,WAAW,CAACD,EAAE,CAAC,CAC9C,CACF,CAAC,CAED,MAAO,MAAM,CAAAE,cAAc,CAAGjB,gBAAgB,CAC5C,2BAA2B,CAC3B,KAAO,CAAAkB,QAA+B,EAAK,CACzC,MAAO,MAAM,CAAAjB,eAAe,CAACgB,cAAc,CAACC,QAAQ,CAAC,CACvD,CACF,CAAC,CAED,MAAO,MAAM,CAAAC,cAAc,CAAGnB,gBAAgB,CAC5C,2BAA2B,CAC3B,MAAAoB,KAAA,EAA6E,IAAtE,CAAEL,EAAE,CAAEG,QAA0D,CAAC,CAAAE,KAAA,CACtE,MAAO,MAAM,CAAAnB,eAAe,CAACkB,cAAc,CAACJ,EAAE,CAAEG,QAAQ,CAAC,CAC3D,CACF,CAAC,CAED,MAAO,MAAM,CAAAG,cAAc,CAAGrB,gBAAgB,CAC5C,2BAA2B,CAC3B,KAAO,CAAAe,EAAU,EAAK,CACpB,KAAM,CAAAd,eAAe,CAACoB,cAAc,CAACN,EAAE,CAAC,CACxC,MAAO,CAAAA,EAAE,CACX,CACF,CAAC,CAED,KAAM,CAAAO,aAAa,CAAGvB,WAAW,CAAC,CAChCwB,IAAI,CAAE,YAAY,CAClBrB,YAAY,CACZsB,QAAQ,CAAE,CACRC,mBAAmB,CAAEA,CAACC,KAAK,CAAEC,MAAsC,GAAK,CACtED,KAAK,CAACtB,gBAAgB,CAAGuB,MAAM,CAACC,OAAO,CACzC,CAAC,CACDC,qBAAqB,CAAGH,KAAK,EAAK,CAChCA,KAAK,CAACtB,gBAAgB,CAAG,IAAI,CAC/B,CACF,CAAC,CACD0B,aAAa,CAAGC,OAAO,EAAK,CAC1B;AACAA,OAAO,CACJC,OAAO,CAACtB,eAAe,CAACuB,OAAO,CAAGP,KAAK,EAAK,CAC3CA,KAAK,CAAClB,OAAO,CAAG,IAAI,CACpBkB,KAAK,CAACjB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACDuB,OAAO,CAACtB,eAAe,CAACwB,SAAS,CAAE,CAACR,KAAK,CAAEC,MAAM,GAAK,CACrDD,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACvB,KAAK,CAAGwB,MAAM,CAACC,OAAO,CAACO,IAAI,EAAI,EAAE,CACvCT,KAAK,CAACrB,UAAU,CAAGsB,MAAM,CAACC,OAAO,CAACvB,UAAU,CAC5CqB,KAAK,CAACpB,UAAU,CAAGqB,MAAM,CAACC,OAAO,CAACtB,UAAU,CAC5CoB,KAAK,CAACnB,QAAQ,CAAGoB,MAAM,CAACC,OAAO,CAACrB,QAAQ,CAC1C,CAAC,CAAC,CACDyB,OAAO,CAACtB,eAAe,CAAC0B,QAAQ,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,CACpDD,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACjB,KAAK,CAAGkB,MAAM,CAAClB,KAAK,CAAC4B,OAAO,EAAI,yBAAyB,CACjE,CAAC,CAAC,CAEJ;AACAN,OAAO,CACJC,OAAO,CAAClB,aAAa,CAACmB,OAAO,CAAGP,KAAK,EAAK,CACzCA,KAAK,CAAClB,OAAO,CAAG,IAAI,CACpBkB,KAAK,CAACjB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACDuB,OAAO,CAAClB,aAAa,CAACoB,SAAS,CAAE,CAACR,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACtB,gBAAgB,CAAGuB,MAAM,CAACC,OAAO,CACzC,CAAC,CAAC,CACDI,OAAO,CAAClB,aAAa,CAACsB,QAAQ,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,CAClDD,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACjB,KAAK,CAAGkB,MAAM,CAAClB,KAAK,CAAC4B,OAAO,EAAI,sBAAsB,CAC9D,CAAC,CAAC,CAEJ;AACAN,OAAO,CACJC,OAAO,CAACf,cAAc,CAACgB,OAAO,CAAGP,KAAK,EAAK,CAC1CA,KAAK,CAAClB,OAAO,CAAG,IAAI,CACpBkB,KAAK,CAACjB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACDuB,OAAO,CAACf,cAAc,CAACiB,SAAS,CAAE,CAACR,KAAK,CAAEC,MAAM,GAAK,CACpDD,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACvB,KAAK,CAACmC,IAAI,CAACX,MAAM,CAACC,OAAO,CAAC,CAChCF,KAAK,CAACrB,UAAU,EAAI,CAAC,CACvB,CAAC,CAAC,CACD2B,OAAO,CAACf,cAAc,CAACmB,QAAQ,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACjB,KAAK,CAAGkB,MAAM,CAAClB,KAAK,CAAC4B,OAAO,EAAI,yBAAyB,CACjE,CAAC,CAAC,CAEJ;AACAN,OAAO,CACJC,OAAO,CAACb,cAAc,CAACc,OAAO,CAAGP,KAAK,EAAK,CAC1CA,KAAK,CAAClB,OAAO,CAAG,IAAI,CACpBkB,KAAK,CAACjB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACDuB,OAAO,CAACb,cAAc,CAACe,SAAS,CAAE,CAACR,KAAK,CAAEC,MAAM,GAAK,KAAAY,qBAAA,CACpDb,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrB,KAAM,CAAAgC,KAAK,CAAGd,KAAK,CAACvB,KAAK,CAACsC,SAAS,CAAEC,IAAI,EAAKA,IAAI,CAAC3B,EAAE,GAAKY,MAAM,CAACC,OAAO,CAACb,EAAE,CAAC,CAC5E,GAAIyB,KAAK,GAAK,CAAC,CAAC,CAAE,CAChBd,KAAK,CAACvB,KAAK,CAACqC,KAAK,CAAC,CAAGb,MAAM,CAACC,OAAO,CACrC,CACA,GAAI,EAAAW,qBAAA,CAAAb,KAAK,CAACtB,gBAAgB,UAAAmC,qBAAA,iBAAtBA,qBAAA,CAAwBxB,EAAE,IAAKY,MAAM,CAACC,OAAO,CAACb,EAAE,CAAE,CACpDW,KAAK,CAACtB,gBAAgB,CAAGuB,MAAM,CAACC,OAAO,CACzC,CACF,CAAC,CAAC,CACDI,OAAO,CAACb,cAAc,CAACiB,QAAQ,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACjB,KAAK,CAAGkB,MAAM,CAAClB,KAAK,CAAC4B,OAAO,EAAI,yBAAyB,CACjE,CAAC,CAAC,CAEJ;AACAN,OAAO,CACJC,OAAO,CAACX,cAAc,CAACY,OAAO,CAAGP,KAAK,EAAK,CAC1CA,KAAK,CAAClB,OAAO,CAAG,IAAI,CACpBkB,KAAK,CAACjB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACDuB,OAAO,CAACX,cAAc,CAACa,SAAS,CAAE,CAACR,KAAK,CAAEC,MAAM,GAAK,KAAAgB,sBAAA,CACpDjB,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACvB,KAAK,CAAGuB,KAAK,CAACvB,KAAK,CAACyC,MAAM,CAAEF,IAAI,EAAKA,IAAI,CAAC3B,EAAE,GAAKY,MAAM,CAACC,OAAO,CAAC,CACtEF,KAAK,CAACrB,UAAU,EAAI,CAAC,CACrB,GAAI,EAAAsC,sBAAA,CAAAjB,KAAK,CAACtB,gBAAgB,UAAAuC,sBAAA,iBAAtBA,sBAAA,CAAwB5B,EAAE,IAAKY,MAAM,CAACC,OAAO,CAAE,CACjDF,KAAK,CAACtB,gBAAgB,CAAG,IAAI,CAC/B,CACF,CAAC,CAAC,CACD4B,OAAO,CAACX,cAAc,CAACe,QAAQ,CAAE,CAACV,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAAClB,OAAO,CAAG,KAAK,CACrBkB,KAAK,CAACjB,KAAK,CAAGkB,MAAM,CAAClB,KAAK,CAAC4B,OAAO,EAAI,qBAAqB,CAC7D,CAAC,CAAC,CACN,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CAAEZ,mBAAmB,CAAEI,qBAAsB,CAAC,CAAGP,aAAa,CAACuB,OAAO,CAEnF,cAAe,CAAAvB,aAAa,CAACwB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}